<template name="article">
    {{#if show_view "article"}}
    <div id="article">
        {{> article_content}}
    </div>
    {{/if}}
</template>

<template name="article_content">
    {{#with current_article}}
    <article>
        {{#if is_user}}
        {{> article_edit}}
        {{/if}}
        <header class="page-header">
            <hgroup>
                <h6>
                    {{user_name}}
                    <small>{{datestring time}}</small>
                </h6>
                <h2>{{title}}
                    <small>{{subtitle}}</small>
                </h2>
            </hgroup>
        </header>
        <section>
            <div class="lead">{{#markdown}}{{intro}}{{/markdown}}</div>
            <div class="dynamic-content">
                {{#each dynamic_content}}
                {{{get_content this}}}
                {{/each}}
            </div>
        </section>
        <hr>
        <footer>
            <p>
                {{#each tags}}
                <span class="label label-inverse">{{this}}</span>
                {{/each}}
            </p>
        </footer>
    </article>
    {{/with}}
</template>

<template name="article:paragraph">
    {{#markdown}}{{content}}{{/markdown}}
</template>
        
<template name="article:image">
    {{#markdown}}{{content}}{{/markdown}}
</template>

<template name="article:code">
    <pre class="prettyprint"><code class="{{content.type}}">{{content.code}}</code></pre>
</template>

<template name="article_edit">
    <div class="pull-right">
        <a class="btn btn-mini internal-link" href="/p/{{slug}}"><i class="icon-pencil"></i></a>
    </div>
</template>